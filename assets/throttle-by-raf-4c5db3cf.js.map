{"version":3,"file":"throttle-by-raf-4c5db3cf.js","sources":["../../../../packages/system/src/raf.ts","../../../../packages/system/src/throttle-by-raf.ts"],"sourcesContent":["// thx arco.design\nconst target = typeof window === \"undefined\" ? globalThis : window\nconst vendors = [\"webkit\", \"ms\", \"moz\", \"o\"]\n\nlet raf: any = (target as unknown as Window).requestAnimationFrame\nlet caf: any = (target as unknown as Window).cancelAnimationFrame\n\nif (!raf || !caf) {\n  vendors.some((prefix) => {\n    raf = (target as any)[`${prefix}RequestAnimationFrame`]\n    caf =\n      (target as any)[`${prefix}CancelAnimationFrame`] ||\n      (target as any)[`${prefix}CancelRequestAnimationFrame`]\n    return raf && caf\n  })\n\n  if (!raf || !caf) {\n    let lastTime = 0\n    raf = function (cb: () => void) {\n      const currentTime = Date.now()\n      const diff = Math.max(0, 16 - (currentTime - lastTime))\n      const timer = setTimeout(() => {\n        cb()\n        lastTime = currentTime + diff\n      }, diff)\n      return timer\n    }\n\n    caf = function (timer: number) {\n      clearTimeout(timer)\n    }\n  }\n}\n\nraf = raf.bind(target)\ncaf = caf.bind(target)\n\nexport { raf, caf }\n","// thx arco.design\nimport { raf, caf } from \"./raf\"\n\nexport function throttleByRaf(cb: (...args: any[]) => void) {\n  let timer: null | number = null\n\n  const throttle = function (...args: any[]) {\n    timer && caf(timer)\n    timer = raf(() => {\n      cb(...args)\n      timer = null\n    })\n  }\n\n  throttle.cancel = () => {\n    caf(timer)\n    timer = null\n  }\n\n  return throttle\n}\n"],"names":["target","vendors","raf","caf","prefix","lastTime","cb","currentTime","diff","timer","throttleByRaf","throttle","args"],"mappings":"AACA,MAAMA,EAAS,OAAO,OAAW,IAAc,WAAa,OACtDC,EAAU,CAAC,SAAU,KAAM,MAAO,GAAG,EAE3C,IAAIC,EAAYF,EAA6B,sBACzCG,EAAYH,EAA6B,qBAE7C,IAAI,CAACE,GAAO,CAACC,KACHF,EAAA,KAAMG,IACLF,EAAAF,EAAe,GAAGI,CAAM,uBAAuB,EAEnDD,EAAAH,EAAe,GAAGI,CAAM,sBAAsB,GAC9CJ,EAAe,GAAGI,CAAM,6BAA6B,EACjDF,GAAOC,EACf,EAEG,CAACD,GAAO,CAACC,GAAK,CAChB,IAAIE,EAAW,EACfH,EAAM,SAAUI,EAAgB,CACxB,MAAAC,EAAc,KAAK,MACnBC,EAAO,KAAK,IAAI,EAAG,IAAMD,EAAcF,EAAS,EAK/C,OAJO,WAAW,IAAM,CAC1BC,IACHD,EAAWE,EAAcC,GACxBA,CAAI,CACA,EAGTL,EAAM,SAAUM,EAAe,CAC7B,aAAaA,CAAK,CAAA,CAEtB,CAGFP,EAAMA,EAAI,KAAKF,CAAM,EACrBG,EAAMA,EAAI,KAAKH,CAAM,EChCd,SAASU,EAAcJ,EAA8B,CAC1D,IAAIG,EAAuB,KAErB,MAAAE,EAAW,YAAaC,EAAa,CACzCH,GAASN,EAAIM,CAAK,EAClBA,EAAQP,EAAI,IAAM,CAChBI,EAAG,GAAGM,CAAI,EACFH,EAAA,IAAA,CACT,CAAA,EAGH,OAAAE,EAAS,OAAS,IAAM,CACtBR,EAAIM,CAAK,EACDA,EAAA,IAAA,EAGHE,CACT"}