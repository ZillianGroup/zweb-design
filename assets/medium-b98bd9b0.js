import{r as v}from"./index-c4905b50.js";import{_ as h}from"./tslib.es6-bfc81c0b.js";function m(e,r){return typeof e=="function"?e(r):e&&(e.current=r),e}function g(e,r){var n=v.useState(function(){return{value:e,callback:r,facade:{get current(){return n.value},set current(t){var c=n.value;c!==t&&(n.value=t,n.callback(t,c))}}}})[0];return n.callback=r,n.facade}function E(e,r){return g(r||null,function(n){return e.forEach(function(t){return m(t,n)})})}function s(e){return e}function l(e,r){r===void 0&&(r=s);var n=[],t=!1,c={read:function(){if(t)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var u=r(i,t);return n.push(u),function(){n=n.filter(function(a){return a!==u})}},assignSyncMedium:function(i){for(t=!0;n.length;){var u=n;n=[],u.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){t=!0;var u=[];if(n.length){var a=n;n=[],a.forEach(i),u=n}var d=function(){var f=u;u=[],f.forEach(i)},o=function(){return Promise.resolve().then(d)};o(),n={push:function(f){u.push(f),o()},filter:function(f){return u=u.filter(f),n}}}};return c}function y(e,r){return r===void 0&&(r=s),l(e,r)}function b(e){e===void 0&&(e={});var r=l(null);return r.options=h({async:!0,ssr:!1},e),r}export{y as a,b as c,E as u};
//# sourceMappingURL=medium-b98bd9b0.js.map
