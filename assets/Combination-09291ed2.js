import{a as Je}from"./setPrototypeOf-51e8cf87.js";import{_ as B,a as Qe}from"./defineProperty-147cd0d2.js";import{r as l,R as Xe}from"./index-c4905b50.js";import{a as q,c as Ze,u as et}from"./medium-b98bd9b0.js";import{_ as tt}from"./inheritsLoose-0bea7c65.js";var R="data-focus-lock",fe="data-focus-lock-disabled",nt="data-no-focus-lock",rt="data-autofocus-inside",at="data-no-autofocus",L={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},se=q({},function(e){var t=e.target,n=e.currentTarget;return{target:t,currentTarget:n}}),de=q(),ut=q(),ot=Ze({async:!0}),it=[],$=l.forwardRef(function(t,n){var r,a=l.useState(),o=a[0],u=a[1],i=l.useRef(),s=l.useRef(!1),d=l.useRef(null),f=t.children,c=t.disabled,m=t.noFocusGuards,v=t.persistentFocus,b=t.crossFrame,h=t.autoFocus;t.allowTextSelection;var g=t.group,E=t.className,S=t.whiteList,De=t.hasPositiveIndices,Z=t.shards,Le=Z===void 0?it:Z,ee=t.as,Me=ee===void 0?"div":ee,te=t.lockProps,_e=te===void 0?{}:te,Ue=t.sideCar,w=t.returnFocus,Be=t.focusOptions,P=t.onActivation,k=t.onDeactivation,Re=l.useState({}),We=Re[0],Ge=l.useCallback(function(){d.current=d.current||document&&document.activeElement,i.current&&P&&P(i.current),s.current=!0},[P]),He=l.useCallback(function(){s.current=!1,k&&k(i.current)},[k]);l.useEffect(function(){c||(d.current=null)},[]);var qe=l.useCallback(function(F){var I=d.current;if(I&&I.focus){var D=typeof w=="function"?w(I):w;if(D){var re=typeof D=="object"?D:void 0;d.current=null,F?Promise.resolve().then(function(){return I.focus(re)}):I.focus(re)}}},[w]),$e=l.useCallback(function(F){s.current&&se.useMedium(F)},[]),Ve=de.useMedium,je=l.useCallback(function(F){i.current!==F&&(i.current=F,u(F))},[]),Ke=B((r={},r[fe]=c&&"disabled",r[R]=g,r),_e),ne=m!==!0,Ye=ne&&m!=="tail",ze=et([n,je]);return l.createElement(l.Fragment,null,ne&&[l.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:c?-1:0,style:L}),De?l.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:c?-1:1,style:L}):null],!c&&l.createElement(Ue,{id:We,sideCar:ot,observed:o,disabled:c,persistentFocus:v,crossFrame:b,autoFocus:h,whiteList:S,shards:Le,onActivation:Ge,onDeactivation:He,returnFocus:qe,focusOptions:Be}),l.createElement(Me,B({ref:ze},Ke,{className:E,onBlur:Ve,onFocus:$e}),f),Ye&&l.createElement("div",{"data-focus-guard":!0,tabIndex:c?-1:0,style:L}))});$.propTypes={};$.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};const le=$;function ct(e,t){function n(r){return r.displayName||r.name||"Component"}return function(a){var o=[],u;function i(){u=e(o.map(function(d){return d.props})),t(u)}var s=function(d){tt(f,d);function f(){return d.apply(this,arguments)||this}f.peek=function(){return u};var c=f.prototype;return c.componentDidMount=function(){o.push(this),i()},c.componentDidUpdate=function(){i()},c.componentWillUnmount=function(){var v=o.indexOf(this);o.splice(v,1),i()},c.render=function(){return Xe.createElement(a,this.props)},f}(l.PureComponent);return Qe(s,"displayName","SideEffect("+n(a)+")"),s}}var p=function(e){for(var t=Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t},W=function(e){return Array.isArray(e)?e:[e]},ft=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!t||!t.getPropertyValue?!1:t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"},ve=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},me=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},st=function(e,t){return!e||me(e)||!ft(e)&&t(ve(e))},be=function(e,t){var n=e.get(t);if(n!==void 0)return n;var r=st(t,be.bind(void 0,e));return e.set(t,r),r},dt=function(e,t){return e&&!me(e)?mt(e)?t(ve(e)):!1:!0},he=function(e,t){var n=e.get(t);if(n!==void 0)return n;var r=dt(t,he.bind(void 0,e));return e.set(t,r),r},pe=function(e){return e.dataset},lt=function(e){return e.tagName==="BUTTON"},ge=function(e){return e.tagName==="INPUT"},Fe=function(e){return ge(e)&&e.type==="radio"},vt=function(e){return!((ge(e)||lt(e))&&(e.type==="hidden"||e.disabled))},mt=function(e){var t=e.getAttribute(at);return![!0,"true",""].includes(t)},V=function(e){var t;return!!(e&&(!((t=pe(e))===null||t===void 0)&&t.focusGuard))},N=function(e){return!V(e)},bt=function(e){return!!e},ht=function(e,t){var n=e.tabIndex-t.tabIndex,r=e.index-t.index;if(n){if(!e.tabIndex)return 1;if(!t.tabIndex)return-1}return n||r},Ee=function(e,t,n){return p(e).map(function(r,a){return{node:r,index:a,tabIndex:n&&r.tabIndex===-1?(r.dataset||{}).focusGuard?0:-1:r.tabIndex}}).filter(function(r){return!t||r.tabIndex>=0}).sort(ht)},pt=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],j=pt.join(","),gt="".concat(j,", [data-focus-guard]"),Oe=function(e,t){var n;return p(((n=e.shadowRoot)===null||n===void 0?void 0:n.children)||e.children).reduce(function(r,a){return r.concat(a.matches(t?gt:j)?[a]:[],Oe(a))},[])},K=function(e,t){return e.reduce(function(n,r){return n.concat(Oe(r,t),r.parentNode?p(r.parentNode.querySelectorAll(j)).filter(function(a){return a===r}):[])},[])},Ft=function(e){var t=e.querySelectorAll("[".concat(rt,"]"));return p(t).map(function(n){return K([n])}).reduce(function(n,r){return n.concat(r)},[])},Y=function(e,t){return p(e).filter(function(n){return be(t,n)}).filter(function(n){return vt(n)})},ae=function(e,t){return t===void 0&&(t=new Map),p(e).filter(function(n){return he(t,n)})},G=function(e,t,n){return Ee(Y(K(e,n),t),!0,n)},ue=function(e,t){return Ee(Y(K(e),t),!1)},Et=function(e,t){return Y(Ft(e),t)},A=function(e,t){return e.shadowRoot?A(e.shadowRoot,t):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,t)?!0:p(e.children).some(function(n){return A(n,t)})},Ot=function(e){for(var t=new Set,n=e.length,r=0;r<n;r+=1)for(var a=r+1;a<n;a+=1){var o=e[r].compareDocumentPosition(e[a]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(a),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(r)}return e.filter(function(u,i){return!t.has(i)})},ye=function(e){return e.parentNode?ye(e.parentNode):e},z=function(e){var t=W(e);return t.filter(Boolean).reduce(function(n,r){var a=r.getAttribute(R);return n.push.apply(n,a?Ot(p(ye(r).querySelectorAll("[".concat(R,'="').concat(a,'"]:not([').concat(fe,'="disabled"])')))):[r]),n},[])},xe=function(e){return e.activeElement?e.activeElement.shadowRoot?xe(e.activeElement.shadowRoot):e.activeElement:void 0},J=function(){return document.activeElement?document.activeElement.shadowRoot?xe(document.activeElement.shadowRoot):document.activeElement:void 0},yt=function(e){return e===document.activeElement},xt=function(e){return!!p(e.querySelectorAll("iframe")).some(function(t){return yt(t)})},Ie=function(e){var t=document&&J();return!t||t.dataset&&t.dataset.focusGuard?!1:z(e).some(function(n){return A(n,t)||xt(n)})},It=function(){var e=document&&J();return e?p(document.querySelectorAll("[".concat(nt,"]"))).some(function(t){return A(t,e)}):!1},At=function(e,t){return t.filter(Fe).filter(function(n){return n.name===e.name}).filter(function(n){return n.checked})[0]||e},Q=function(e,t){return Fe(e)&&e.name?At(e,t):e},Tt=function(e){var t=new Set;return e.forEach(function(n){return t.add(Q(n,e))}),e.filter(function(n){return t.has(n)})},oe=function(e){return e[0]&&e.length>1?Q(e[0],e):e[0]},ie=function(e,t){return e.length>1?e.indexOf(Q(e[t],e)):t},Ae="NEW_FOCUS",St=function(e,t,n,r){var a=e.length,o=e[0],u=e[a-1],i=V(n);if(!(n&&e.indexOf(n)>=0)){var s=n!==void 0?t.indexOf(n):-1,d=r?t.indexOf(r):s,f=r?e.indexOf(r):-1,c=s-d,m=t.indexOf(o),v=t.indexOf(u),b=Tt(t),h=n!==void 0?b.indexOf(n):-1,g=h-(r?b.indexOf(r):s),E=ie(e,0),S=ie(e,a-1);if(s===-1||f===-1)return Ae;if(!c&&f>=0)return f;if(s<=m&&i&&Math.abs(c)>1)return S;if(s>=v&&i&&Math.abs(c)>1)return E;if(c&&Math.abs(g)>1)return f;if(s<=m)return S;if(s>v)return E;if(c)return Math.abs(c)>1?f:(a+f+c)%a}},wt=function(e){return function(t){var n,r=(n=pe(t))===null||n===void 0?void 0:n.autofocus;return t.autofocus||r!==void 0&&r!=="false"||e.indexOf(t)>=0}},Nt=function(e,t,n){var r=e.map(function(o){var u=o.node;return u}),a=ae(r.filter(wt(n)));return a&&a.length?oe(a):oe(ae(t))},H=function(e,t){return t===void 0&&(t=[]),t.push(e),e.parentNode&&H(e.parentNode.host||e.parentNode,t),t},M=function(e,t){for(var n=H(e),r=H(t),a=0;a<n.length;a+=1){var o=n[a];if(r.indexOf(o)>=0)return o}return!1},Te=function(e,t,n){var r=W(e),a=W(t),o=r[0],u=!1;return a.filter(Boolean).forEach(function(i){u=M(u||i,i)||u,n.filter(Boolean).forEach(function(s){var d=M(o,s);d&&(!u||A(d,u)?u=d:u=M(d,u))})}),u},Ct=function(e,t){return e.reduce(function(n,r){return n.concat(Et(r,t))},[])},Pt=function(e,t){var n=new Map;return t.forEach(function(r){return n.set(r.node,r)}),e.map(function(r){return n.get(r)}).filter(bt)},kt=function(e,t){var n=document&&J(),r=z(e).filter(N),a=Te(n||e,e,r),o=new Map,u=ue(r,o),i=G(r,o).filter(function(v){var b=v.node;return N(b)});if(!(!i[0]&&(i=u,!i[0]))){var s=ue([a],o).map(function(v){var b=v.node;return b}),d=Pt(s,i),f=d.map(function(v){var b=v.node;return b}),c=St(f,s,n,t);if(c===Ae){var m=Nt(u,f,Ct(r,o));if(m)return{node:m};console.warn("focus-lock: cannot find any node to move focus into");return}return c===void 0?c:d[c]}},Dt=function(e){var t=z(e).filter(N),n=Te(e,e,t),r=new Map,a=G([n],r,!0),o=G(t,r).filter(function(u){var i=u.node;return N(i)}).map(function(u){var i=u.node;return i});return a.map(function(u){var i=u.node,s=u.index;return{node:i,index:s,lockItem:o.indexOf(i)>=0,guard:V(i)}})},Lt=function(e,t){"focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus()},_=0,U=!1,Se=function(e,t,n){n===void 0&&(n={});var r=kt(e,t);if(!U&&r){if(_>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),U=!0,setTimeout(function(){U=!1},1);return}_++,Lt(r.node,n.focusOptions),_--}};function we(e){var t=window,n=t.setImmediate;typeof n<"u"?n(e):setTimeout(e,1)}var Mt=function(){return document&&document.activeElement===document.body},_t=function(){return Mt()||It()},y=null,O=null,x=null,T=!1,Ut=function(){return!0},Bt=function(t){return(y.whiteList||Ut)(t)},Rt=function(t,n){x={observerNode:t,portaledElement:n}},Wt=function(t){return x&&x.portaledElement===t};function ce(e,t,n,r){var a=null,o=e;do{var u=r[o];if(u.guard)u.node.dataset.focusAutoGuard&&(a=u);else if(u.lockItem){if(o!==e)return;a=null}else break}while((o+=n)!==t);a&&(a.node.tabIndex=0)}var Gt=function(t){return t&&"current"in t?t.current:t},Ht=function(t){return t?!!T:T==="meanwhile"},qt=function e(t,n,r){return n&&(n.host===t&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&e(t,n.parentNode,r))},$t=function(t,n){return n.some(function(r){return qt(t,r,r)})},C=function(){var t=!1;if(y){var n=y,r=n.observed,a=n.persistentFocus,o=n.autoFocus,u=n.shards,i=n.crossFrame,s=n.focusOptions,d=r||x&&x.portaledElement,f=document&&document.activeElement;if(d){var c=[d].concat(u.map(Gt).filter(Boolean));if((!f||Bt(f))&&(a||Ht(i)||!_t()||!O&&o)&&(d&&!(Ie(c)||f&&$t(f,c)||Wt(f))&&(document&&!O&&f&&!o?(f.blur&&f.blur(),document.body.focus()):(t=Se(c,O,{focusOptions:s}),x={})),T=!1,O=document&&document.activeElement),document){var m=document&&document.activeElement,v=Dt(c),b=v.map(function(h){var g=h.node;return g}).indexOf(m);b>-1&&(v.filter(function(h){var g=h.guard,E=h.node;return g&&E.dataset.focusAutoGuard}).forEach(function(h){var g=h.node;return g.removeAttribute("tabIndex")}),ce(b,v.length,1,v),ce(b,-1,-1,v))}}}return t},Ne=function(t){C()&&t&&(t.stopPropagation(),t.preventDefault())},X=function(){return we(C)},Vt=function(t){var n=t.target,r=t.currentTarget;r.contains(n)||Rt(r,n)},jt=function(){return null},Ce=function(){T="just",setTimeout(function(){T="meanwhile"},0)},Kt=function(){document.addEventListener("focusin",Ne),document.addEventListener("focusout",X),window.addEventListener("blur",Ce)},Yt=function(){document.removeEventListener("focusin",Ne),document.removeEventListener("focusout",X),window.removeEventListener("blur",Ce)};function zt(e){return e.filter(function(t){var n=t.disabled;return!n})}function Jt(e){var t=e.slice(-1)[0];t&&!y&&Kt();var n=y,r=n&&t&&t.id===n.id;y=t,n&&!r&&(n.onDeactivation(),e.filter(function(a){var o=a.id;return o===n.id}).length||n.returnFocus(!t)),t?(O=null,(!r||n.observed!==t.observed)&&t.onActivation(),C(),we(C)):(Yt(),O=null)}se.assignSyncMedium(Vt);de.assignMedium(X);ut.assignMedium(function(e){return e({moveFocusInside:Se,focusInside:Ie})});const Qt=ct(zt,Jt)(jt);var Pe=l.forwardRef(function(t,n){return l.createElement(le,B({sideCar:Qt,ref:n},t))}),ke=le.propTypes||{};ke.sideCar;Je(ke,["sideCar"]);Pe.propTypes={};const rn=Pe;export{rn as F};
//# sourceMappingURL=Combination-09291ed2.js.map
