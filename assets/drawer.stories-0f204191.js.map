{"version":3,"file":"drawer.stories-0f204191.js","sources":["../../packages/drawer/src/style.ts","../../packages/drawer/src/drawer.tsx"],"sourcesContent":["import { css, SerializedStyles } from \"@emotion/react\"\nimport { globalColor, illaPrefix, zIndex } from \"@illa-design/theme\"\nimport { Variants } from \"framer-motion\"\nimport { DrawerPlacement } from \"./interface\"\n\nexport function applyDrawerStyle(\n  w: string,\n  h: string,\n  placement: DrawerPlacement,\n): SerializedStyles {\n  return css`\n    ${placement}: 0;\n    width: ${w};\n    height: ${h};\n    position: absolute;\n    background-color: ${globalColor(`--${illaPrefix}-white-01`)};\n  `\n}\n\nexport function applyDrawerWrapper(isFixed?: boolean): SerializedStyles {\n  return css`\n    position: ${isFixed ? \"fixed\" : \"absolute\"};\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: ${zIndex.drawer};\n  `\n}\n\nexport const applyDrawerScroll = css`\n  position: relative;\n  overflow-y: auto;\n  width: 100%;\n  height: 100%;\n`\n\nexport const applyDrawerMask = css`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: ${globalColor(`--${illaPrefix}-blackAlpha-04`)};\n`\n\nexport const applyDrawerHeader = css`\n  padding: 8px 24px;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  min-height: 40px;\n  box-sizing: border-box;\n  border-bottom: 1px solid ${globalColor(`--${illaPrefix}-grayBlue-08`)};\n  flex-shrink: 0;\n  flex-grow: 0;\n`\n\nexport const applyDrawerTitle = css`\n  font-size: 16px;\n  line-height: 1.5;\n  font-weight: 500;\n  text-align: center;\n  color: ${globalColor(`--${illaPrefix}-grayBlue-02`)};\n`\n\nexport const applyDrawerCloseIcon = css`\n  position: absolute;\n  cursor: pointer;\n  top: 18px;\n  right: 20px;\n  font-size: 8px;\n  color: ${globalColor(`--${illaPrefix}-grayBlue-03`)};\n  line-height: 0;\n`\n\nexport const applyDrawerFooter = css`\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  box-sizing: border-box;\n  flex-shrink: 0;\n  text-align: right;\n  padding: 8px 24px;\n  border-top: 1px solid ${globalColor(`--${illaPrefix}-grayBlue-08`)};\n`\n\nexport const applyModalCancelBtn = css`\n  margin-right: 8px;\n`\n\nexport const maskAnimation: Variants = {\n  initial: {\n    opacity: 0,\n  },\n  animate: {\n    opacity: 1,\n  },\n  exit: {\n    opacity: 0,\n  },\n}\n\nexport function applyDrawerSlider(placement?: DrawerPlacement): Variants {\n  let originX, originY\n  switch (placement) {\n    case \"top\":\n      originY = \"-100%\"\n      break\n    case \"bottom\":\n      originY = \"100%\"\n      break\n    case \"left\":\n      originX = \"-100%\"\n      break\n    case \"right\":\n      originX = \"100%\"\n      break\n  }\n\n  return {\n    initial: {\n      x: `${originX}`,\n      y: `${originY}`,\n    },\n    animate: {\n      x: 0,\n      y: 0,\n    },\n    exit: {\n      x: `${originX}`,\n      y: `${originY}`,\n    },\n  }\n}\n\nexport const fullStyle = css`\n  width: 100%;\n  height: 100%;\n`\n","import { forwardRef, useContext } from \"react\"\nimport { createPortal } from \"react-dom\"\nimport FocusLock from \"react-focus-lock\"\nimport { RemoveScroll } from \"react-remove-scroll\"\nimport { DrawerProps } from \"./interface\"\nimport { AnimatePresence, motion } from \"framer-motion\"\nimport {\n  ConfigProviderContext,\n  ConfigProviderProps,\n  def,\n} from \"@illa-design/config-provider\"\nimport { CloseIcon } from \"@illa-design/icon\"\nimport { Button } from \"@illa-design/button\"\nimport {\n  applyDrawerCloseIcon,\n  applyDrawerFooter,\n  applyDrawerHeader,\n  applyDrawerMask,\n  applyDrawerScroll,\n  applyDrawerSlider,\n  applyDrawerStyle,\n  applyDrawerTitle,\n  applyDrawerWrapper,\n  applyModalCancelBtn,\n  fullStyle,\n  maskAnimation,\n} from \"./style\"\nimport { applyBoxStyle, deleteCssProps } from \"@illa-design/theme\"\n\nexport const Drawer = forwardRef<HTMLDivElement, DrawerProps>((props, ref) => {\n  const {\n    children,\n    title,\n    w = \"250px\",\n    h = \"100%\",\n    footer = true,\n    visible,\n    mask = true,\n    maskClosable = true,\n    maskStyle,\n    closable = true,\n    okText,\n    cancelText,\n    focusLock = true,\n    autoFocus = true,\n    placement = \"right\",\n    confirmLoading,\n    onOk,\n    onCancel,\n    afterOpen,\n    afterClose,\n    ...otherProps\n  } = props\n  const configProviderProps = useContext<ConfigProviderProps>(\n    ConfigProviderContext,\n  )\n  const locale = configProviderProps?.locale?.drawer ?? def.drawer\n\n  const renderDrawer = () => {\n    const element = (\n      <RemoveScroll css={fullStyle}>\n        <div css={applyDrawerScroll} {...deleteCssProps(otherProps)}>\n          {title && (\n            <div css={applyDrawerHeader}>\n              <div css={applyDrawerTitle}>{title}</div>\n            </div>\n          )}\n          {closable && (\n            <div css={applyDrawerCloseIcon} onClick={onCancel}>\n              <CloseIcon />\n            </div>\n          )}\n          {children}\n          {footer && (\n            <div css={applyDrawerFooter}>\n              <Button\n                css={applyModalCancelBtn}\n                onClick={onCancel}\n                colorScheme=\"gray\"\n                size=\"medium\"\n              >\n                {cancelText || locale.cancelText}\n              </Button>\n              <Button size=\"medium\" onClick={onOk} loading={confirmLoading}>\n                {okText || locale.okText}\n              </Button>\n            </div>\n          )}\n        </div>\n      </RemoveScroll>\n    )\n    return focusLock ? (\n      <FocusLock css={fullStyle} disabled={!visible} autoFocus={autoFocus}>\n        {element}\n      </FocusLock>\n    ) : (\n      element\n    )\n  }\n\n  return (\n    <>\n      {createPortal(\n        <AnimatePresence>\n          {visible && (\n            <div ref={ref} css={applyDrawerWrapper(true)}>\n              {mask ? (\n                <motion.div\n                  variants={maskAnimation}\n                  animate=\"animate\"\n                  exit=\"exit\"\n                  initial=\"initial\"\n                  transition={{ duration: 0.3 }}\n                  css={[applyDrawerMask, maskStyle]}\n                  onClick={(e) => {\n                    maskClosable && onCancel && onCancel(e)\n                  }}\n                />\n              ) : null}\n              <motion.div\n                variants={applyDrawerSlider(placement)}\n                animate=\"animate\"\n                exit=\"exit\"\n                initial=\"initial\"\n                transition={{ duration: 0.3 }}\n                css={[applyDrawerStyle(w, h, placement), applyBoxStyle(props)]}\n                onAnimationComplete={(definition) => {\n                  if (definition === \"animate\") {\n                    afterOpen?.()\n                  }\n                  if (definition === \"exit\") {\n                    afterClose?.()\n                  }\n                }}\n              >\n                {renderDrawer()}\n              </motion.div>\n            </div>\n          )}\n        </AnimatePresence>,\n        document.body,\n      )}\n    </>\n  )\n})\n\nDrawer.displayName = \"Drawer\"\n"],"names":["applyDrawerStyle","w","h","placement","css","globalColor","illaPrefix","applyDrawerWrapper","isFixed","zIndex","applyDrawerScroll","applyDrawerMask","applyDrawerHeader","applyDrawerTitle","applyDrawerCloseIcon","applyDrawerFooter","applyModalCancelBtn","maskAnimation","applyDrawerSlider","originX","originY","fullStyle","Drawer","forwardRef","props","ref","children","title","footer","visible","mask","maskClosable","maskStyle","closable","okText","cancelText","focusLock","autoFocus","confirmLoading","onOk","onCancel","afterOpen","afterClose","otherProps","configProviderProps","useContext","ConfigProviderContext","locale","_a","def","renderDrawer","element","jsx","RemoveScroll","jsxs","deleteCssProps","CloseIcon","Button","FocusLock","Fragment","createPortal","AnimatePresence","motion","e","applyBoxStyle","definition"],"mappings":"qpCAKgB,SAAAA,GACdC,EACAC,EACAC,EACkB,CACX,OAAAC;AAAA,MACHD,CAAS;AAAA,aACFF,CAAC;AAAA,cACAC,CAAC;AAAA;AAAA,wBAESG,EAAY,KAAKC,CAAU,WAAW,CAAC;AAAA,GAE/D,CAEO,SAASC,GAAmBC,EAAqC,CAC/D,OAAAJ;AAAA,gBACOI,EAAU,QAAU,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,eAK/BC,EAAO,MAAM;AAAA,GAE5B,CAEO,MAAMC,GAAoBN;AAAA;AAAA;AAAA;AAAA;AAAA,EAOpBO,GAAkBP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAMTC,EAAY,KAAKC,CAAU,gBAAgB,CAAC;AAAA,EAGrDM,GAAoBR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAOJC,EAAY,KAAKC,CAAU,cAAc,CAAC;AAAA;AAAA;AAAA,EAK1DO,GAAmBT;AAAA;AAAA;AAAA;AAAA;AAAA,WAKrBC,EAAY,KAAKC,CAAU,cAAc,CAAC;AAAA,EAGxCQ,GAAuBV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAMzBC,EAAY,KAAKC,CAAU,cAAc,CAAC;AAAA;AAAA,EAIxCS,GAAoBX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAQPC,EAAY,KAAKC,CAAU,cAAc,CAAC;AAAA,EAGvDU,GAAsBZ;AAAA;AAAA,EAItBa,GAA0B,CACrC,QAAS,CACP,QAAS,CACX,EACA,QAAS,CACP,QAAS,CACX,EACA,KAAM,CACJ,QAAS,CACX,CACF,EAEO,SAASC,GAAkBf,EAAuC,CACvE,IAAIgB,EAASC,EACb,OAAQjB,EAAW,CACjB,IAAK,MACOiB,EAAA,QACV,MACF,IAAK,SACOA,EAAA,OACV,MACF,IAAK,OACOD,EAAA,QACV,MACF,IAAK,QACOA,EAAA,OACV,KACJ,CAEO,MAAA,CACL,QAAS,CACP,EAAG,GAAGA,CAAO,GACb,EAAG,GAAGC,CAAO,EACf,EACA,QAAS,CACP,EAAG,EACH,EAAG,CACL,EACA,KAAM,CACJ,EAAG,GAAGD,CAAO,GACb,EAAG,GAAGC,CAAO,EACf,CAAA,CAEJ,CAEO,MAAMC,EAAYjB;AAAA;AAAA;AAAA,EC3GlBkB,EAAAC,EAAA,WAAA,CAAAC,EAAAC,IAAA,OACL,KAAA,CAAM,SAAAC,EACJ,MAAAC,EACA,EAAA1B,EAAA,QACI,EAAAC,EAAA,OACA,OAAA0B,EAAA,GACK,QAAAC,EACT,KAAAC,EAAA,GACO,aAAAC,EAAA,GACQ,UAAAC,EACf,SAAAC,EAAA,GACW,OAAAC,EACX,WAAAC,EACA,UAAAC,EAAA,GACY,UAAAC,EAAA,GACA,UAAAlC,EAAA,QACA,eAAAmC,EACZ,KAAAC,EACA,SAAAC,EACA,UAAAC,EACA,WAAAC,EACA,GAAAC,CACG,EAAAnB,EAELoB,EAAAC,EAAA,WAA4BC,EAC1B,EAEFC,IAAAC,EAAAJ,GAAA,YAAAA,EAAA,SAAA,YAAAI,EAAA,SAAAC,GAAA,OAEAC,EAAA,IAAA,CACE,MAAAC,EAAAC,EAAAC,EAAA,CAAA,IAAAhC,EAAA,SAAAiC,EAAA,MAAA,CAAA,IAAA5C,GAAA,GAAA6C,EAAAZ,CAAA,EAAA,SAAA,CAGOhB,GAAAyB,EAAA,MAAA,CAAA,IAAAxC,GAAA,SAAAwC,EAAA,MAAA,CAAA,IAAAvC,GAAA,SAAAc,CAAA,CAAA,CAAA,CAAA,EAGCM,GAAAmB,EAAA,MAAA,CAAA,IAAAtC,GAAA,QAAA0B,EAAA,SAAAY,EAAAI,GAAA,CAAA,CAAA,CAAA,CAAA,EAKA9B,EAEDE,GAAA0B,EAAA,MAAA,CAAA,IAAAvC,GAAA,SAAA,CAGGqC,EAAAK,EAAC,CAAA,IAAAzC,GACM,QAAAwB,EACI,YAAA,OACG,KAAA,SACP,SAAAL,GAAAY,EAAA,UAEiB,CAAA,EACxBK,EAAAK,EAAA,CAAA,KAAA,SAAA,QAAAlB,EAAA,QAAAD,EAAA,SAAAJ,GAAAa,EAAA,MAAA,CAAA,CAGA,EAAA,CACF,CAAA,CAAA,CAAA,CAAA,EAKR,OAAAX,EAAAgB,EAAAM,EAAA,CAAA,IAAArC,EAAA,SAAA,CAAAQ,EAAA,UAAAQ,EAAA,SAAAc,CAAA,CAAA,EAAAA,CAKE,EAIJ,OAAAC,EAAAO,EAAA,CAAA,SAAAC,EAAA,aAEKR,EAAAS,EAAA,CAAA,SAAAhC,GAAAyB,EAAA,MAAA,CAAA,IAAA7B,EAAA,IAAAlB,GAAA,EAAA,EAAA,SAAA,CAIQuB,EAAAsB,EACCU,EAAA,IAAQ,CAAP,SAAA7C,GACW,QAAA,UACF,KAAA,OACH,QAAA,UACG,WAAA,CAAA,SAAA,EAAA,EACoB,IAAA,CAAAN,GAAAqB,CAAA,EACI,QAAA+B,GAAA,CAE9BhC,GAAAS,GAAAA,EAAAuB,CAAA,CAAsC,CACxC,CAAA,EAAA,KAEAX,EACJU,EAAA,IAAQ,CAAP,SAAA5C,GAAAf,CAAA,EACsC,QAAA,UAC7B,KAAA,OACH,QAAA,UACG,WAAA,CAAA,SAAA,EAAA,EACoB,IAAA,CAAAH,GAAAC,EAAAC,EAAAC,CAAA,EAAA6D,EAAAxC,CAAA,CAAA,EACiC,oBAAAyC,GAAA,CAE3DA,IAAA,YACExB,GAAA,MAAAA,KAEFwB,IAAA,SACEvB,GAAA,MAAAA,IACF,EACF,SAAAQ,EAAA,CAEc,CAAA,CAChB,CAAA,CAAA,CAAA,CAAA,EAGN,SAAA,IACS,CAAA,CAAA,CAIjB,CAAA,EAEA5B,EAAA,YAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}