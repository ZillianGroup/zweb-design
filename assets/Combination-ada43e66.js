import{_ as Xe}from"./objectWithoutPropertiesLoose-4f48578a.js";import{_ as G}from"./extends-98964cd2.js";import{r as l,a as Ze}from"./index-1cdf6ce0.js";import{a as er}from"./tslib.es6-75de5960.js";import{_ as rr}from"./inheritsLoose-d541526f.js";import{_ as nr}from"./defineProperty-f749b14d.js";var H="data-focus-lock",se="data-focus-lock-disabled",tr="data-no-focus-lock",ur="data-autofocus-inside",ar="data-no-autofocus";function or(e,r){return typeof e=="function"?e(r):e&&(e.current=r),e}function ir(e,r){var n=l.useState(function(){return{value:e,callback:r,facade:{get current(){return n.value},set current(t){var u=n.value;u!==t&&(n.value=t,n.callback(t,u))}}}})[0];return n.callback=r,n.facade}function cr(e,r){return ir(r||null,function(n){return e.forEach(function(t){return or(t,n)})})}var U={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"};function de(e){return e}function le(e,r){r===void 0&&(r=de);var n=[],t=!1,u={read:function(){if(t)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var a=r(o,t);return n.push(a),function(){n=n.filter(function(i){return i!==a})}},assignSyncMedium:function(o){for(t=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(i){return o(i)},filter:function(){return n}}},assignMedium:function(o){t=!0;var a=[];if(n.length){var i=n;n=[],i.forEach(o),a=n}var d=function(){var c=a;a=[],c.forEach(o)},s=function(){return Promise.resolve().then(d)};s(),n={push:function(c){a.push(c),s()},filter:function(c){return a=a.filter(c),n}}}};return u}function V(e,r){return r===void 0&&(r=de),le(e,r)}function fr(e){e===void 0&&(e={});var r=le(null);return r.options=er({async:!0,ssr:!1},e),r}var ve=V({},function(e){var r=e.target,n=e.currentTarget;return{target:r,currentTarget:n}}),me=V(),sr=V(),dr=fr({async:!0}),lr=[],j=l.forwardRef(function(r,n){var t,u=l.useState(),o=u[0],a=u[1],i=l.useRef(),d=l.useRef(!1),s=l.useRef(null),c=r.children,f=r.disabled,m=r.noFocusGuards,v=r.persistentFocus,h=r.crossFrame,b=r.autoFocus;r.allowTextSelection;var g=r.group,y=r.className,w=r.whiteList,Le=r.hasPositiveIndices,ee=r.shards,De=ee===void 0?lr:ee,re=r.as,Ue=re===void 0?"div":re,ne=r.lockProps,We=ne===void 0?{}:ne,Be=r.sideCar,C=r.returnFocus,Re=r.focusOptions,_=r.onActivation,L=r.onDeactivation,Ge=l.useState({}),He=Ge[0],qe=l.useCallback(function(){s.current=s.current||document&&document.activeElement,i.current&&_&&_(i.current),d.current=!0},[_]),$e=l.useCallback(function(){d.current=!1,L&&L(i.current)},[L]);l.useEffect(function(){f||(s.current=null)},[]);var Ve=l.useCallback(function(F){var S=s.current;if(S&&S.focus){var D=typeof C=="function"?C(S):C;if(D){var ue=typeof D=="object"?D:void 0;s.current=null,F?Promise.resolve().then(function(){return S.focus(ue)}):S.focus(ue)}}},[C]),je=l.useCallback(function(F){d.current&&ve.useMedium(F)},[]),Qe=me.useMedium,Ke=l.useCallback(function(F){i.current!==F&&(i.current=F,a(F))},[]),Ye=G((t={},t[se]=f&&"disabled",t[H]=g,t),We),te=m!==!0,ze=te&&m!=="tail",Je=cr([n,Ke]);return l.createElement(l.Fragment,null,te&&[l.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:f?-1:0,style:U}),Le?l.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:f?-1:1,style:U}):null],!f&&l.createElement(Be,{id:He,sideCar:dr,observed:o,disabled:f,persistentFocus:v,crossFrame:h,autoFocus:b,whiteList:w,shards:De,onActivation:qe,onDeactivation:$e,returnFocus:Ve,focusOptions:Re}),l.createElement(Ue,G({ref:Je},Ye,{className:y,onBlur:Qe,onFocus:je}),c),ze&&l.createElement("div",{"data-focus-guard":!0,tabIndex:f?-1:0,style:U}))});j.propTypes={};j.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};const he=j;function vr(e,r){function n(t){return t.displayName||t.name||"Component"}return function(u){var o=[],a;function i(){a=e(o.map(function(s){return s.props})),r(a)}var d=function(s){rr(c,s);function c(){return s.apply(this,arguments)||this}c.peek=function(){return a};var f=c.prototype;return f.componentDidMount=function(){o.push(this),i()},f.componentDidUpdate=function(){i()},f.componentWillUnmount=function(){var v=o.indexOf(this);o.splice(v,1),i()},f.render=function(){return Ze.createElement(u,this.props)},c}(l.PureComponent);return nr(d,"displayName","SideEffect("+n(u)+")"),d}}var p=function(e){for(var r=Array(e.length),n=0;n<e.length;++n)r[n]=e[n];return r},P=function(e){return Array.isArray(e)?e:[e]},be=function(e){return Array.isArray(e)?e[0]:e},mr=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var r=window.getComputedStyle(e,null);return!r||!r.getPropertyValue?!1:r.getPropertyValue("display")==="none"||r.getPropertyValue("visibility")==="hidden"},pe=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},ge=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},hr=function(e,r){return!e||ge(e)||!mr(e)&&r(pe(e))},Fe=function(e,r){var n=e.get(r);if(n!==void 0)return n;var t=hr(r,Fe.bind(void 0,e));return e.set(r,t),t},br=function(e,r){return e&&!ge(e)?Fr(e)?r(pe(e)):!1:!0},ye=function(e,r){var n=e.get(r);if(n!==void 0)return n;var t=br(r,ye.bind(void 0,e));return e.set(r,t),t},Oe=function(e){return e.dataset},pr=function(e){return e.tagName==="BUTTON"},Ee=function(e){return e.tagName==="INPUT"},Ie=function(e){return Ee(e)&&e.type==="radio"},gr=function(e){return!((Ee(e)||pr(e))&&(e.type==="hidden"||e.disabled))},Fr=function(e){var r=e.getAttribute(ar);return![!0,"true",""].includes(r)},Q=function(e){var r;return!!(e&&(!((r=Oe(e))===null||r===void 0)&&r.focusGuard))},N=function(e){return!Q(e)},yr=function(e){return!!e},Or=function(e,r){var n=e.tabIndex-r.tabIndex,t=e.index-r.index;if(n){if(!e.tabIndex)return 1;if(!r.tabIndex)return-1}return n||t},xe=function(e,r,n){return p(e).map(function(t,u){return{node:t,index:u,tabIndex:n&&t.tabIndex===-1?(t.dataset||{}).focusGuard?0:-1:t.tabIndex}}).filter(function(t){return!r||t.tabIndex>=0}).sort(Or)},Er=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],K=Er.join(","),Ir="".concat(K,", [data-focus-guard]"),Se=function(e,r){return p((e.shadowRoot||e).children).reduce(function(n,t){return n.concat(t.matches(r?Ir:K)?[t]:[],Se(t))},[])},xr=function(e,r){var n;return e instanceof HTMLIFrameElement&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?k([e.contentDocument.body],r):[e]},k=function(e,r){return e.reduce(function(n,t){var u,o=Se(t,r),a=(u=[]).concat.apply(u,o.map(function(i){return xr(i,r)}));return n.concat(a,t.parentNode?p(t.parentNode.querySelectorAll(K)).filter(function(i){return i===t}):[])},[])},Sr=function(e){var r=e.querySelectorAll("[".concat(ur,"]"));return p(r).map(function(n){return k([n])}).reduce(function(n,t){return n.concat(t)},[])},Y=function(e,r){return p(e).filter(function(n){return Fe(r,n)}).filter(function(n){return gr(n)})},ae=function(e,r){return r===void 0&&(r=new Map),p(e).filter(function(n){return ye(r,n)})},q=function(e,r,n){return xe(Y(k(e,n),r),!0,n)},oe=function(e,r){return xe(Y(k(e),r),!1)},Tr=function(e,r){return Y(Sr(e),r)},E=function(e,r){return e.shadowRoot?E(e.shadowRoot,r):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,r)?!0:p(e.children).some(function(n){var t;if(n instanceof HTMLIFrameElement){var u=(t=n.contentDocument)===null||t===void 0?void 0:t.body;return u?E(u,r):!1}return E(n,r)})},Ar=function(e){for(var r=new Set,n=e.length,t=0;t<n;t+=1)for(var u=t+1;u<n;u+=1){var o=e[t].compareDocumentPosition(e[u]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&r.add(u),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&r.add(t)}return e.filter(function(a,i){return!r.has(i)})},Te=function(e){return e.parentNode?Te(e.parentNode):e},z=function(e){var r=P(e);return r.filter(Boolean).reduce(function(n,t){var u=t.getAttribute(H);return n.push.apply(n,u?Ar(p(Te(t).querySelectorAll("[".concat(H,'="').concat(u,'"]:not([').concat(se,'="disabled"])')))):[t]),n},[])},wr=function(e){try{return e()}catch{return}},T=function(e){if(e===void 0&&(e=document),!(!e||!e.activeElement)){var r=e.activeElement;return r.shadowRoot?T(r.shadowRoot):r instanceof HTMLIFrameElement&&wr(function(){return r.contentWindow.document})?T(r.contentWindow.document):r}},Cr=function(e,r){return e===r},Pr=function(e,r){return!!p(e.querySelectorAll("iframe")).some(function(n){return Cr(n,r)})},Ae=function(e,r){return r===void 0&&(r=T(be(e).ownerDocument)),!r||r.dataset&&r.dataset.focusGuard?!1:z(e).some(function(n){return E(n,r)||Pr(n,r)})},Nr=function(e){e===void 0&&(e=document);var r=T(e);return r?p(e.querySelectorAll("[".concat(tr,"]"))).some(function(n){return E(n,r)}):!1},Mr=function(e,r){return r.filter(Ie).filter(function(n){return n.name===e.name}).filter(function(n){return n.checked})[0]||e},J=function(e,r){return Ie(e)&&e.name?Mr(e,r):e},kr=function(e){var r=new Set;return e.forEach(function(n){return r.add(J(n,e))}),e.filter(function(n){return r.has(n)})},ie=function(e){return e[0]&&e.length>1?J(e[0],e):e[0]},ce=function(e,r){return e.length>1?e.indexOf(J(e[r],e)):r},we="NEW_FOCUS",_r=function(e,r,n,t){var u=e.length,o=e[0],a=e[u-1],i=Q(n);if(!(n&&e.indexOf(n)>=0)){var d=n!==void 0?r.indexOf(n):-1,s=t?r.indexOf(t):d,c=t?e.indexOf(t):-1,f=d-s,m=r.indexOf(o),v=r.indexOf(a),h=kr(r),b=n!==void 0?h.indexOf(n):-1,g=b-(t?h.indexOf(t):d),y=ce(e,0),w=ce(e,u-1);if(d===-1||c===-1)return we;if(!f&&c>=0)return c;if(d<=m&&i&&Math.abs(f)>1)return w;if(d>=v&&i&&Math.abs(f)>1)return y;if(f&&Math.abs(g)>1)return c;if(d<=m)return w;if(d>v)return y;if(f)return Math.abs(f)>1?c:(u+c+f)%u}},Lr=function(e){return function(r){var n,t=(n=Oe(r))===null||n===void 0?void 0:n.autofocus;return r.autofocus||t!==void 0&&t!=="false"||e.indexOf(r)>=0}},Dr=function(e,r,n){var t=e.map(function(o){var a=o.node;return a}),u=ae(t.filter(Lr(n)));return u&&u.length?ie(u):ie(ae(r))},$=function(e,r){return r===void 0&&(r=[]),r.push(e),e.parentNode&&$(e.parentNode.host||e.parentNode,r),r},W=function(e,r){for(var n=$(e),t=$(r),u=0;u<n.length;u+=1){var o=n[u];if(t.indexOf(o)>=0)return o}return!1},Ce=function(e,r,n){var t=P(e),u=P(r),o=t[0],a=!1;return u.filter(Boolean).forEach(function(i){a=W(a||i,i)||a,n.filter(Boolean).forEach(function(d){var s=W(o,d);s&&(!a||E(s,a)?a=s:a=W(s,a))})}),a},Ur=function(e,r){return e.reduce(function(n,t){return n.concat(Tr(t,r))},[])},Wr=function(e,r){var n=new Map;return r.forEach(function(t){return n.set(t.node,t)}),e.map(function(t){return n.get(t)}).filter(yr)},Br=function(e,r){var n=T(P(e).length>0?document:be(e).ownerDocument),t=z(e).filter(N),u=Ce(n||e,e,t),o=new Map,a=oe(t,o),i=q(t,o).filter(function(v){var h=v.node;return N(h)});if(!(!i[0]&&(i=a,!i[0]))){var d=oe([u],o).map(function(v){var h=v.node;return h}),s=Wr(d,i),c=s.map(function(v){var h=v.node;return h}),f=_r(c,d,n,r);if(f===we){var m=Dr(a,c,Ur(t,o));if(m)return{node:m};console.warn("focus-lock: cannot find any node to move focus into");return}return f===void 0?f:s[f]}},Rr=function(e){var r=z(e).filter(N),n=Ce(e,e,r),t=new Map,u=q([n],t,!0),o=q(r,t).filter(function(a){var i=a.node;return N(i)}).map(function(a){var i=a.node;return i});return u.map(function(a){var i=a.node,d=a.index;return{node:i,index:d,lockItem:o.indexOf(i)>=0,guard:Q(i)}})},Gr=function(e,r){"focus"in e&&e.focus(r),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus()},B=0,R=!1,Pe=function(e,r,n){n===void 0&&(n={});var t=Br(e,r);if(!R&&t){if(B>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),R=!0,setTimeout(function(){R=!1},1);return}B++,Gr(t.node,n.focusOptions),B--}};function X(e){setTimeout(e,1)}var Hr=function(){return document&&document.activeElement===document.body},qr=function(){return Hr()||Nr()},I=null,O=null,x=null,A=!1,$r=function(){return!0},Vr=function(r){return(I.whiteList||$r)(r)},jr=function(r,n){x={observerNode:r,portaledElement:n}},Qr=function(r){return x&&x.portaledElement===r};function fe(e,r,n,t){var u=null,o=e;do{var a=t[o];if(a.guard)a.node.dataset.focusAutoGuard&&(u=a);else if(a.lockItem){if(o!==e)return;u=null}else break}while((o+=n)!==r);u&&(u.node.tabIndex=0)}var Kr=function(r){return r&&"current"in r?r.current:r},Yr=function(r){return r?!!A:A==="meanwhile"},zr=function e(r,n,t){return n&&(n.host===r&&(!n.activeElement||t.contains(n.activeElement))||n.parentNode&&e(r,n.parentNode,t))},Jr=function(r,n){return n.some(function(t){return zr(r,t,t)})},M=function(){var r=!1;if(I){var n=I,t=n.observed,u=n.persistentFocus,o=n.autoFocus,a=n.shards,i=n.crossFrame,d=n.focusOptions,s=t||x&&x.portaledElement,c=document&&document.activeElement;if(s){var f=[s].concat(a.map(Kr).filter(Boolean));if((!c||Vr(c))&&(u||Yr(i)||!qr()||!O&&o)&&(s&&!(Ae(f)||c&&Jr(c,f)||Qr(c))&&(document&&!O&&c&&!o?(c.blur&&c.blur(),document.body.focus()):(r=Pe(f,O,{focusOptions:d}),x={})),A=!1,O=document&&document.activeElement),document){var m=document&&document.activeElement,v=Rr(f),h=v.map(function(b){var g=b.node;return g}).indexOf(m);h>-1&&(v.filter(function(b){var g=b.guard,y=b.node;return g&&y.dataset.focusAutoGuard}).forEach(function(b){var g=b.node;return g.removeAttribute("tabIndex")}),fe(h,v.length,1,v),fe(h,-1,-1,v))}}}return r},Ne=function(r){M()&&r&&(r.stopPropagation(),r.preventDefault())},Z=function(){return X(M)},Xr=function(r){var n=r.target,t=r.currentTarget;t.contains(n)||jr(t,n)},Zr=function(){return null},Me=function(){A="just",X(function(){A="meanwhile"})},en=function(){document.addEventListener("focusin",Ne),document.addEventListener("focusout",Z),window.addEventListener("blur",Me)},rn=function(){document.removeEventListener("focusin",Ne),document.removeEventListener("focusout",Z),window.removeEventListener("blur",Me)};function nn(e){return e.filter(function(r){var n=r.disabled;return!n})}function tn(e){var r=e.slice(-1)[0];r&&!I&&en();var n=I,t=n&&r&&r.id===n.id;I=r,n&&!t&&(n.onDeactivation(),e.filter(function(u){var o=u.id;return o===n.id}).length||n.returnFocus(!r)),r?(O=null,(!t||n.observed!==r.observed)&&r.onActivation(),M(),X(M)):(rn(),O=null)}ve.assignSyncMedium(Xr);me.assignMedium(Z);sr.assignMedium(function(e){return e({moveFocusInside:Pe,focusInside:Ae})});const un=vr(nn,tn)(Zr);var ke=l.forwardRef(function(r,n){return l.createElement(he,G({sideCar:un,ref:n},r))}),_e=he.propTypes||{};_e.sideCar;Xe(_e,["sideCar"]);ke.propTypes={};const ln=ke;export{ln as F,fr as c,cr as u};
//# sourceMappingURL=Combination-ada43e66.js.map
